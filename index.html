<html>
	<head>
		<title>E-mail canvas hash</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<script src="email.js"></script>
		<style>
			body { font-family: georgia; }
			canvas { border:2px solid black; }
			canvas.maze { border:none; }
			td { padding:0.5em; text-align:center; }
			input { text-align:center; }
			thead { font-weight:bold; } 
			table { border-collapse: collapse; }
			thead td { background-color:#ddd; }
			tbody tr:nth-child(even) td { background-color:#eee;}
			form { margin:0px; }
		</style>
	</head>
	
	<body>
		<h1>E-mail canvas hash</h1>
		<ul>
			<li>Palette: <a href="http://web.media.mit.edu/~wad/color/palette.html">http://web.media.mit.edu/~wad/color/palette.html</a> without black, white and dark gray</li>
			<li>Only letters (case insensitive) and numbers are used</li>
		</ul>
		<table>
			<thead>
				<tr>
					<td>Try here!<br/>&darr;</td>
					<td><a href="http://en.wikipedia.org/wiki/Piet_Mondrian">Piet Mondrian</a>, domain generates grid, mailbox generates colors</td>
					<td colspan="2">Circle position and color generated by character pairs, size is gradually diminishing</td>
					<td>Same as before, constant circle radius, XOR compositing</td>
					<td>So-called <em>perfect maze</em>, each two cells connected by exactly one route</td>
				</tr>
			</thead>
			<tbody>
				<tr><td><input type="text" value="@" size="30" /></td></tr>
				<tr><td>webmaster@seznam.cz</td></tr>
				<tr><td>svatoslav.kohoutek@seznam.cz</td></tr>
				<tr><td>ondrej.zara@firma.seznam.cz</td></tr>
				<tr><td>ondrej.zara@gmail.com</td></tr>
				<tr><td>foo.bar@gmail.com</td></tr>
				<tr><td>example@example.com</td></tr>
				<tr><td>pan.cau@caune.neasi</td></tr>
				<tr><td>reditel@zemekoule.co.uk</td></tr>
			</tbody>
		</table>
		
		<script>
			function generate(text, tr) {
				while (tr.childNodes.length > 1) { tr.removeChild(tr.childNodes[1]); }

				var td = document.createElement("td");
				td.appendChild(new PMCode(text, {lineWidth:2}).getCanvas());
				tr.appendChild(td);

				var td = document.createElement("td");
				td.appendChild(new CircleCode(text, {lineWidth:0}).getCanvas());
				tr.appendChild(td);

				var td = document.createElement("td");
				td.appendChild(new CircleCode(text, {lineWidth:2}).getCanvas());
				tr.appendChild(td);

				var td = document.createElement("td");
				td.appendChild(new CircleCode(text, {lineWidth:0, radius:0.4, operation:"xor", radiusFactor:1}).getCanvas());
				tr.appendChild(td);

				var td = document.createElement("td");
				td.appendChild(new Maze(text, {lineWidth:2}).getCanvas());
				tr.appendChild(td);
			}
			
			var input = document.getElementsByTagName("input")[0];
			input.addEventListener("keyup", function(e) {
				if (!input.value.match(/@/)) { return; }
				var text = input.value;
				generate(text, input.parentNode.parentNode);
			}, false);
			
			var trs = document.getElementsByTagName("tbody")[0].getElementsByTagName("tr");
			for (var i=1;i<trs.length;i++) {
				var text = trs[i].firstChild.innerHTML;
				generate(text, trs[i]);
			}
		</script>
		
		<p>&copy; 2011 <a href="http://ondras.zarovi.cz/">Ondřej Žára</a></p>
	
	</body>

</html>
